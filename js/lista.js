// Generated by CoffeeScript 2.7.0
import {
  g,
  print,
  range
} from './globals.js';

export var Lista = class Lista {
  constructor(objects, columnTitles, drawFunction) {
    this.objects = objects;
    this.columnTitles = columnTitles;
    this.drawFunction = drawFunction;
    this.offset = 0;
    this.currentRow = 0;
  }

  draw() { // ritar de rader som syns i f√∂nstret enbart
    var i, iRow, len, p, r, ref, results, s, y;
    y = 4.0 * g.ZOOM[g.state];
    s = this.columnTitles;
    textAlign(window.LEFT);
    text(s, 10, y);
    fill('black');
    r = g.tournament.round - 1;
    ref = range(this.offset, this.offset + g.LPP);
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      iRow = ref[i];
      if (iRow >= this.objects.length) {
        continue;
      }
      p = this.objects[iRow];
      y += g.ZOOM[g.state];
      s = this.drawFunction(p);
      if (iRow === this.currentRow) {
        fill('yellow');
        noStroke();
        rect(0, y - 0.5 * g.ZOOM[g.state], width, g.ZOOM[g.state]);
        fill('black');
      }
      results.push(text(s, 10, y));
    }
    return results;
  }

  mouseWheel(event) {
    if (event.delta < 0 && this.offset > 0) {
      this.offset -= g.LPP;
    }
    if (event.delta > 0 && this.offset < g.N - g.LPP) {
      this.offset += g.LPP;
    }
    if (this.currentRow < this.offset) {
      this.currentRow += g.LPP;
    }
    if (this.currentRow >= this.offset + g.LPP) {
      return this.currentRow -= g.LPP;
    }
  }

  mousePressed() {
    var button, key, results;
    if (mouseY > 4 * g.ZOOM[g.state]) {
      print('Lista', mouseY);
      return this.currentRow = this.offset + int(mouseY / g.ZOOM[g.state] - 4.5);
    } else {
      results = [];
      for (key in this.buttons) {
        button = this.buttons[key];
        if (button.inside(mouseX, mouseY)) {
          results.push(button.click());
        } else {
          results.push(void 0);
        }
      }
      return results;
    }
  }

  keyPressed(event, key) {
    return this.buttons[key].click();
  }

  ArrowUp() {
    if (this.currentRow === 0) {
      return;
    }
    this.currentRow -= 1;
    if (this.currentRow < this.offset) {
      this.offset -= g.LPP;
    }
    return event.preventDefault();
  }

  ArrowDown() {
    if (this.currentRow === g.N - 1) {
      return;
    }
    this.currentRow += 1;
    if (this.currentRow >= this.offset + g.LPP) {
      this.offset += g.LPP;
    }
    return event.preventDefault();
  }

  PageUp() {
    if (this.offset < g.LPP) {
      return;
    }
    this.offset -= g.LPP;
    this.currentRow = this.offset;
    return event.preventDefault();
  }

  PageDown() {
    if (this.offset > g.N - g.LPP) {
      return;
    }
    this.offset += g.LPP;
    this.currentRow = this.offset;
    return event.preventDefault();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdGEuanMiLCJzb3VyY2VSb290IjoiLi5cXCIsInNvdXJjZXMiOlsiY29mZmVlXFxsaXN0YS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQUE7RUFBUyxDQUFUO0VBQVcsS0FBWDtFQUFpQixLQUFqQjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFhLFFBQU4sTUFBQSxNQUFBO0VBQ04sV0FBYyxRQUFBLGNBQUEsY0FBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0lBQVMsSUFBQyxDQUFBO0lBQWMsSUFBQyxDQUFBO0lBQ3hDLElBQUMsQ0FBQSxNQUFELEdBQVU7SUFDVixJQUFDLENBQUEsVUFBRCxHQUFjO0VBRkQ7O0VBSWQsSUFBTyxDQUFBLENBQUEsRUFBQTtBQUVSLFFBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLENBQUEsRUFBQTtJQUFFLENBQUEsR0FBSSxHQUFBLEdBQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSDtJQUNoQixDQUFBLEdBQUksSUFBQyxDQUFBO0lBQ0wsU0FBQSxDQUFVLE1BQU0sQ0FBQyxJQUFqQjtJQUNBLElBQUEsQ0FBSyxDQUFMLEVBQU8sRUFBUCxFQUFVLENBQVY7SUFFQSxJQUFBLENBQUssT0FBTDtJQUNBLENBQUEsR0FBSSxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQWIsR0FBcUI7QUFDekI7QUFBQTtJQUFBLEtBQUEscUNBQUE7O01BQ0MsSUFBRyxJQUFBLElBQVEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFwQjtBQUFnQyxpQkFBaEM7O01BQ0EsQ0FBQSxHQUFJLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBRDtNQUNaLENBQUEsSUFBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFIO01BRVgsQ0FBQSxHQUFJLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBZDtNQUVKLElBQUcsSUFBQSxLQUFRLElBQUMsQ0FBQSxVQUFaO1FBQ0MsSUFBQSxDQUFLLFFBQUw7UUFDQSxRQUFBLENBQUE7UUFDQSxJQUFBLENBQUssQ0FBTCxFQUFRLENBQUEsR0FBSSxHQUFBLEdBQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSCxDQUF4QixFQUFtQyxLQUFuQyxFQUEwQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFILENBQWhEO1FBQ0EsSUFBQSxDQUFLLE9BQUwsRUFKRDs7bUJBTUEsSUFBQSxDQUFLLENBQUwsRUFBTyxFQUFQLEVBQVUsQ0FBVjtJQWJELENBQUE7O0VBVE07O0VBd0JQLFVBQWEsQ0FBQyxLQUFELENBQUE7SUFDWixJQUFHLEtBQUssQ0FBQyxLQUFOLEdBQWMsQ0FBZCxJQUFvQixJQUFDLENBQUEsTUFBRCxHQUFVLENBQWpDO01BQXdDLElBQUMsQ0FBQSxNQUFELElBQVcsQ0FBQyxDQUFDLElBQXJEOztJQUNBLElBQUcsS0FBSyxDQUFDLEtBQU4sR0FBYyxDQUFkLElBQW9CLElBQUMsQ0FBQSxNQUFELEdBQVUsQ0FBQyxDQUFDLENBQUYsR0FBTSxDQUFDLENBQUMsR0FBekM7TUFBa0QsSUFBQyxDQUFBLE1BQUQsSUFBVyxDQUFDLENBQUMsSUFBL0Q7O0lBQ0EsSUFBRyxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxNQUFsQjtNQUE4QixJQUFDLENBQUEsVUFBRCxJQUFlLENBQUMsQ0FBQyxJQUEvQzs7SUFDQSxJQUFHLElBQUMsQ0FBQSxVQUFELElBQWUsSUFBQyxDQUFBLE1BQUQsR0FBUSxDQUFDLENBQUMsR0FBNUI7YUFBcUMsSUFBQyxDQUFBLFVBQUQsSUFBZSxDQUFDLENBQUMsSUFBdEQ7O0VBSlk7O0VBTWIsWUFBZSxDQUFBLENBQUE7QUFDaEIsUUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBO0lBQUUsSUFBRyxNQUFBLEdBQVMsQ0FBQSxHQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUgsQ0FBdEI7TUFDQyxLQUFBLENBQU0sT0FBTixFQUFjLE1BQWQ7YUFDQSxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxNQUFELEdBQVUsR0FBQSxDQUFJLE1BQUEsR0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFILENBQWYsR0FBMkIsR0FBL0IsRUFGekI7S0FBQSxNQUFBO0FBSUM7TUFBQSxLQUFBLG1CQUFBO1FBQ0MsTUFBQSxHQUFTLElBQUMsQ0FBQSxPQUFPLENBQUMsR0FBRDtRQUNqQixJQUFHLE1BQU0sQ0FBQyxNQUFQLENBQWMsTUFBZCxFQUFxQixNQUFyQixDQUFIO3VCQUFvQyxNQUFNLENBQUMsS0FBUCxDQUFBLEdBQXBDO1NBQUEsTUFBQTsrQkFBQTs7TUFGRCxDQUFBO3FCQUpEOztFQURjOztFQVNmLFVBQWEsQ0FBQyxLQUFELEVBQVEsR0FBUixDQUFBO1dBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxHQUFELENBQUssQ0FBQyxLQUFkLENBQUE7RUFBZjs7RUFFYixPQUFVLENBQUEsQ0FBQTtJQUNULElBQUcsSUFBQyxDQUFBLFVBQUQsS0FBZSxDQUFsQjtBQUF5QixhQUF6Qjs7SUFDQSxJQUFDLENBQUEsVUFBRCxJQUFlO0lBQ2YsSUFBRyxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxNQUFsQjtNQUE4QixJQUFDLENBQUEsTUFBRCxJQUFXLENBQUMsQ0FBQyxJQUEzQzs7V0FDQSxLQUFLLENBQUMsY0FBTixDQUFBO0VBSlM7O0VBTVYsU0FBWSxDQUFBLENBQUE7SUFDWCxJQUFHLElBQUMsQ0FBQSxVQUFELEtBQWUsQ0FBQyxDQUFDLENBQUYsR0FBSSxDQUF0QjtBQUE2QixhQUE3Qjs7SUFDQSxJQUFDLENBQUEsVUFBRCxJQUFlO0lBQ2YsSUFBRyxJQUFDLENBQUEsVUFBRCxJQUFlLElBQUMsQ0FBQSxNQUFELEdBQVUsQ0FBQyxDQUFDLEdBQTlCO01BQXVDLElBQUMsQ0FBQSxNQUFELElBQVcsQ0FBQyxDQUFDLElBQXBEOztXQUNBLEtBQUssQ0FBQyxjQUFOLENBQUE7RUFKVzs7RUFNWixNQUFTLENBQUEsQ0FBQTtJQUNSLElBQUcsSUFBQyxDQUFBLE1BQUQsR0FBVSxDQUFDLENBQUMsR0FBZjtBQUF3QixhQUF4Qjs7SUFDQSxJQUFDLENBQUEsTUFBRCxJQUFXLENBQUMsQ0FBQztJQUNiLElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBQyxDQUFBO1dBQ2YsS0FBSyxDQUFDLGNBQU4sQ0FBQTtFQUpROztFQU1ULFFBQVcsQ0FBQSxDQUFBO0lBQ1YsSUFBRyxJQUFDLENBQUEsTUFBRCxHQUFVLENBQUMsQ0FBQyxDQUFGLEdBQU0sQ0FBQyxDQUFDLEdBQXJCO0FBQThCLGFBQTlCOztJQUNBLElBQUMsQ0FBQSxNQUFELElBQVcsQ0FBQyxDQUFDO0lBQ2IsSUFBQyxDQUFBLFVBQUQsR0FBYyxJQUFDLENBQUE7V0FDZixLQUFLLENBQUMsY0FBTixDQUFBO0VBSlU7O0FBaEVMIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZyxwcmludCxyYW5nZSB9IGZyb20gJy4vZ2xvYmFscy5qcycgXHJcblxyXG5leHBvcnQgY2xhc3MgTGlzdGFcclxuXHRjb25zdHJ1Y3RvciA6IChAb2JqZWN0cywgQGNvbHVtblRpdGxlcywgQGRyYXdGdW5jdGlvbikgLT5cclxuXHRcdEBvZmZzZXQgPSAwXHJcblx0XHRAY3VycmVudFJvdyA9IDBcclxuXHJcblx0ZHJhdyA6IC0+ICMgcml0YXIgZGUgcmFkZXIgc29tIHN5bnMgaSBmw7Zuc3RyZXQgZW5iYXJ0XHJcblxyXG5cdFx0eSA9IDQuMCAqIGcuWk9PTVtnLnN0YXRlXVxyXG5cdFx0cyA9IEBjb2x1bW5UaXRsZXNcclxuXHRcdHRleHRBbGlnbiB3aW5kb3cuTEVGVFxyXG5cdFx0dGV4dCBzLDEwLHlcclxuXHJcblx0XHRmaWxsICdibGFjaydcclxuXHRcdHIgPSBnLnRvdXJuYW1lbnQucm91bmQgLSAxXHJcblx0XHRmb3IgaVJvdyBpbiByYW5nZSBAb2Zmc2V0LEBvZmZzZXQgKyBnLkxQUFxyXG5cdFx0XHRpZiBpUm93ID49IEBvYmplY3RzLmxlbmd0aCB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdHAgPSBAb2JqZWN0c1tpUm93XVxyXG5cdFx0XHR5ICs9IGcuWk9PTVtnLnN0YXRlXSBcclxuXHJcblx0XHRcdHMgPSBAZHJhd0Z1bmN0aW9uIHBcclxuXHJcblx0XHRcdGlmIGlSb3cgPT0gQGN1cnJlbnRSb3dcclxuXHRcdFx0XHRmaWxsICd5ZWxsb3cnXHJcblx0XHRcdFx0bm9TdHJva2UoKVxyXG5cdFx0XHRcdHJlY3QgMCwgeSAtIDAuNSAqIGcuWk9PTVtnLnN0YXRlXSwgd2lkdGgsIGcuWk9PTVtnLnN0YXRlXVxyXG5cdFx0XHRcdGZpbGwgJ2JsYWNrJ1xyXG5cclxuXHRcdFx0dGV4dCBzLDEwLHlcclxuXHJcblx0bW91c2VXaGVlbCA6IChldmVudCkgLT5cclxuXHRcdGlmIGV2ZW50LmRlbHRhIDwgMCBhbmQgQG9mZnNldCA+IDAgdGhlbiBAb2Zmc2V0IC09IGcuTFBQXHJcblx0XHRpZiBldmVudC5kZWx0YSA+IDAgYW5kIEBvZmZzZXQgPCBnLk4gLSBnLkxQUCB0aGVuIEBvZmZzZXQgKz0gZy5MUFBcclxuXHRcdGlmIEBjdXJyZW50Um93IDwgQG9mZnNldCB0aGVuIEBjdXJyZW50Um93ICs9IGcuTFBQXHJcblx0XHRpZiBAY3VycmVudFJvdyA+PSBAb2Zmc2V0K2cuTFBQIHRoZW4gQGN1cnJlbnRSb3cgLT0gZy5MUFBcclxuXHJcblx0bW91c2VQcmVzc2VkIDogLT4gXHJcblx0XHRpZiBtb3VzZVkgPiA0ICogZy5aT09NW2cuc3RhdGVdXHJcblx0XHRcdHByaW50ICdMaXN0YScsbW91c2VZXHJcblx0XHRcdEBjdXJyZW50Um93ID0gQG9mZnNldCArIGludCBtb3VzZVkgLyBnLlpPT01bZy5zdGF0ZV0gLSA0LjVcclxuXHRcdGVsc2VcclxuXHRcdFx0Zm9yIGtleSBvZiBAYnV0dG9uc1xyXG5cdFx0XHRcdGJ1dHRvbiA9IEBidXR0b25zW2tleV1cclxuXHRcdFx0XHRpZiBidXR0b24uaW5zaWRlIG1vdXNlWCxtb3VzZVkgdGhlbiBidXR0b24uY2xpY2soKVxyXG5cclxuXHRrZXlQcmVzc2VkIDogKGV2ZW50LCBrZXkpLT4gQGJ1dHRvbnNba2V5XS5jbGljaygpXHJcblxyXG5cdEFycm93VXAgOiAtPlxyXG5cdFx0aWYgQGN1cnJlbnRSb3cgPT0gMCB0aGVuIHJldHVyblxyXG5cdFx0QGN1cnJlbnRSb3cgLT0gMVxyXG5cdFx0aWYgQGN1cnJlbnRSb3cgPCBAb2Zmc2V0IHRoZW4gQG9mZnNldCAtPSBnLkxQUFxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuXHRBcnJvd0Rvd24gOiAtPlxyXG5cdFx0aWYgQGN1cnJlbnRSb3cgPT0gZy5OLTEgdGhlbiByZXR1cm5cclxuXHRcdEBjdXJyZW50Um93ICs9IDFcclxuXHRcdGlmIEBjdXJyZW50Um93ID49IEBvZmZzZXQgKyBnLkxQUCB0aGVuIEBvZmZzZXQgKz0gZy5MUFBcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHJcblx0UGFnZVVwIDogLT5cclxuXHRcdGlmIEBvZmZzZXQgPCBnLkxQUCB0aGVuIHJldHVybiBcclxuXHRcdEBvZmZzZXQgLT0gZy5MUFBcclxuXHRcdEBjdXJyZW50Um93ID0gQG9mZnNldFxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuXHRQYWdlRG93biA6IC0+XHJcblx0XHRpZiBAb2Zmc2V0ID4gZy5OIC0gZy5MUFAgdGhlbiByZXR1cm4gXHJcblx0XHRAb2Zmc2V0ICs9IGcuTFBQXHJcblx0XHRAY3VycmVudFJvdyA9IEBvZmZzZXRcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuIl19
//# sourceURL=c:\github\Dense\coffee\lista.coffee