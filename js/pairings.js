// Generated by CoffeeScript 2.7.0
import {
  g,
  print,
  range
} from './globals.js';

import {
  Page
} from './page.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

export var Pairings = class Pairings extends Page {
  constructor() {
    var h, t, y;
    super();
    t = g.tournament;
    y = 1.3 * g.ZOOM[g.state];
    h = 20;
    this.lista = new Lista(t.playersByName, "Pause Name", function(p) {
      var s;
      s = p.active ? '      ' : 'pause ';
      return s + g.txtT(p.name, 25, window.LEFT);
    });
    this.timestamp = 0;
    this.buttons = {};
    this.buttons.t = new Button('Tables', 'T = Tables', () => {
      return g.setState(0);
    });
    this.buttons.n = new Button('Names', 'N = Names', () => {
      return g.setState(1);
    });
    this.buttons.s = new Button('Standings', 'S = Standings', () => {
      return g.setState(2);
    });
    this.buttons._ = new Button('Pairings', 'Pair', () => {
      return g.setState(3); 
    });
    this.buttons[' '] = new Button('toggle', 'space = Toggles paused/active', () => {
      return t.playersByName[g.pages[g.state].lista.currentRow].toggle();
    });
    this.buttons.p = new Button('Pair', 'P = Perform pairing', () => {
      return t.lotta();
    });
    this.buttons.i = new Button('I', 'I = zoom In', () => {
      return g.zoomIn(Math.floor(g.N / 2));
    });
    this.buttons.o = new Button('O', 'O = zoom Out', () => {
      return g.zoomOut(Math.floor(g.N / 2));
    });
    this.buttons.ArrowLeft = new Button('', '', () => {
      return g.setState(2);
    });
    this.buttons.ArrowRight = new Button('', '', () => {
      return g.setState(0);
    });
    this.buttons.ArrowUp = new Button('', '', () => {
      return this.lista.ArrowUp();
    });
    this.buttons.ArrowDown = new Button('', '', () => {
      return this.lista.ArrowDown();
    });
    this.buttons.PageUp = new Button('', '', () => {
      return this.lista.PageUp();
    });
    this.buttons.PageDown = new Button('', '', () => {
      return this.lista.PageDown();
    });
    this.buttons._.active = false;
    spread(this.buttons, 0.6 * g.ZOOM[g.state], y, h);
  }

  draw() {
    var button, key, results;
    fill('white');
    this.showHeader(g.tournament.round);
    this.lista.draw();
    results = [];
    for (key in this.buttons) {
      button = this.buttons[key];
      results.push(button.draw());
    }
    return results;
  }

  mouseWheel(event) {
    return this.lista.mouseWheel(event);
  }

  mousePressed(event) {
    var button, key, results;
    if (mouseY < 4 * g.ZOOM[g.state]) {
      print('pressed', mouseY, 4 * g.ZOOM[g.state]);
      print('@buttons', this.buttons);
      results = [];
      for (key in this.buttons) {
        button = this.buttons[key];
        print(button.title);
        if (button.inside(mouseX, mouseY)) {
          results.push(button.click());
        } else {
          results.push(void 0);
        }
      }
      return results;
    } else {
      return this.lista.mousePressed(event);
    }
  }

  keyPressed(event) {
    return this.buttons[key].click();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFpcmluZ3MuanMiLCJzb3VyY2VSb290IjoiLi5cXCIsInNvdXJjZXMiOlsiY29mZmVlXFxwYWlyaW5ncy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQUE7RUFBUyxDQUFUO0VBQVcsS0FBWDtFQUFpQixLQUFqQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLElBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxNQUFUO0VBQWdCLE1BQWhCO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsS0FBVDtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFhLFdBQU4sTUFBQSxTQUFBLFFBQXVCLEtBQXZCO0VBRU4sV0FBYyxDQUFBLENBQUE7QUFDZixRQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7U0FBRSxDQUFBO0lBQ0EsQ0FBQSxHQUFJLENBQUMsQ0FBQztJQUNOLENBQUEsR0FBSSxHQUFBLEdBQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSDtJQUNoQixDQUFBLEdBQUk7SUFFSixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSixDQUFVLENBQUMsQ0FBQyxhQUFaLEVBQTJCLFlBQTNCLEVBQXlDLFFBQUEsQ0FBQyxDQUFELENBQUE7QUFDcEQsVUFBQTtNQUFHLENBQUEsR0FBTyxDQUFDLENBQUMsTUFBTCxHQUFpQixRQUFqQixHQUErQjthQUNuQyxDQUFBLEdBQUksQ0FBQyxDQUFDLElBQUYsQ0FBTyxDQUFDLENBQUMsSUFBVCxFQUFlLEVBQWYsRUFBbUIsTUFBTSxDQUFDLElBQTFCO0lBRjZDLENBQXpDO0lBSVQsSUFBQyxDQUFBLFNBQUQsR0FBYTtJQUNiLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQTtJQUVYLElBQUMsQ0FBQSxPQUFPLENBQUMsQ0FBVCxHQUFhLElBQUksTUFBSixDQUFXLFFBQVgsRUFBcUIsWUFBckIsRUFBeUMsQ0FBQSxDQUFBLEdBQUE7YUFBTSxDQUFDLENBQUMsUUFBRixDQUFXLENBQVg7SUFB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ZCxFQUFxQixNQUFyQixDQUFIO3VCQUFvQyxNQUFNLENBQUMsS0FBUCxDQUFBLEdBQXBDO1NBQUEsTUFBQTsrQkFBQTs7TUFIRCxDQUFBO3FCQUhEO0tBQUEsTUFBQTthQVFDLElBQUMsQ0FBQSxLQUFLLENBQUMsWUFBUCxDQUFvQixLQUFwQixFQVJEOztFQURjOztFQVdmLFVBQWEsQ0FBQyxLQUFELENBQUE7V0FBVyxJQUFDLENBQUEsT0FBTyxDQUFDLEdBQUQsQ0FBSyxDQUFDLEtBQWQsQ0FBQTtFQUFYOztBQTVEUCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGcscHJpbnQscmFuZ2UgfSBmcm9tICcuL2dsb2JhbHMuanMnIFxyXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi9wYWdlLmpzJyBcclxuaW1wb3J0IHsgQnV0dG9uLHNwcmVhZCB9IGZyb20gJy4vYnV0dG9uLmpzJyBcclxuaW1wb3J0IHsgTGlzdGEgfSBmcm9tICcuL2xpc3RhLmpzJyBcclxuXHJcbmV4cG9ydCBjbGFzcyBQYWlyaW5ncyBleHRlbmRzIFBhZ2VcclxuXHJcblx0Y29uc3RydWN0b3IgOiAoKSAtPlxyXG5cdFx0c3VwZXIoKVxyXG5cdFx0dCA9IGcudG91cm5hbWVudFxyXG5cdFx0eSA9IDEuMyAqIGcuWk9PTVtnLnN0YXRlXVxyXG5cdFx0aCA9IDIwXHJcblxyXG5cdFx0QGxpc3RhID0gbmV3IExpc3RhIHQucGxheWVyc0J5TmFtZSwgXCJQYXVzZSBOYW1lXCIsIChwKSAtPlxyXG5cdFx0XHRzID0gaWYgcC5hY3RpdmUgdGhlbiAnICAgICAgJyBlbHNlICdwYXVzZSAnXHJcblx0XHRcdHMgKyBnLnR4dFQgcC5uYW1lLCAyNSwgd2luZG93LkxFRlRcclxuXHJcblx0XHRAdGltZXN0YW1wID0gMFxyXG5cdFx0QGJ1dHRvbnMgPSB7fVxyXG5cclxuXHRcdEBidXR0b25zLnQgPSBuZXcgQnV0dG9uICdUYWJsZXMnLCAnVCA9IFRhYmxlcycsICAgICAgICgpID0+IGcuc2V0U3RhdGUgMFxyXG5cdFx0QGJ1dHRvbnMubiA9IG5ldyBCdXR0b24gJ05hbWVzJywgICdOID0gTmFtZXMnLCAgICAgICAgKCkgPT4gZy5zZXRTdGF0ZSAxXHJcblx0XHRAYnV0dG9ucy5zID0gbmV3IEJ1dHRvbiAnU3RhbmRpbmdzJywgJ1MgPSBTdGFuZGluZ3MnLCAoKSA9PiBnLnNldFN0YXRlIDJcclxuXHRcdEBidXR0b25zLl8gPSBuZXcgQnV0dG9uICdQYWlyaW5ncycsICAgICAnUGFpcicsICAgICAgICgpID0+IGcuc2V0U3RhdGUgMyAjXHJcblxyXG5cdFx0QGJ1dHRvbnNbJyAnXSA9IG5ldyBCdXR0b24gJ3RvZ2dsZScsICAnc3BhY2UgPSBUb2dnbGVzIHBhdXNlZC9hY3RpdmUnLCAoKSA9PiB0LnBsYXllcnNCeU5hbWVbZy5wYWdlc1tnLnN0YXRlXS5saXN0YS5jdXJyZW50Um93XS50b2dnbGUoKVxyXG5cclxuXHRcdEBidXR0b25zLnAgPSBuZXcgQnV0dG9uICdQYWlyJywgICAgICdQID0gUGVyZm9ybSBwYWlyaW5nJywgICAoKSA9PiB0LmxvdHRhKClcclxuXHRcdEBidXR0b25zLmkgPSBuZXcgQnV0dG9uICdJJywgICAgICAgICdJID0gem9vbSBJbicsICAgICgpID0+IGcuem9vbUluIGcuTi8vMlxyXG5cdFx0QGJ1dHRvbnMubyA9IG5ldyBCdXR0b24gJ08nLCAgICAgICAgJ08gPSB6b29tIE91dCcsICAgKCkgPT4gZy56b29tT3V0IGcuTi8vMlxyXG5cclxuXHRcdEBidXR0b25zLkFycm93TGVmdCAgPSBuZXcgQnV0dG9uICcnLCAnJywgICAgKCkgPT4gZy5zZXRTdGF0ZSAyXHJcblx0XHRAYnV0dG9ucy5BcnJvd1JpZ2h0ID0gbmV3IEJ1dHRvbiAnJywgJycsICAgICgpID0+IGcuc2V0U3RhdGUgMFxyXG5cclxuXHRcdEBidXR0b25zLkFycm93VXAgPSBuZXcgQnV0dG9uICcnLCAnJywgICAgICgpID0+IEBsaXN0YS5BcnJvd1VwKClcclxuXHRcdEBidXR0b25zLkFycm93RG93biA9IG5ldyBCdXR0b24gJycsJycsICAgICgpID0+IEBsaXN0YS5BcnJvd0Rvd24oKVxyXG5cclxuXHRcdEBidXR0b25zLlBhZ2VVcCA9IG5ldyBCdXR0b24gJycsICcnLCAgICAgKCkgPT4gQGxpc3RhLlBhZ2VVcCgpXHJcblx0XHRAYnV0dG9ucy5QYWdlRG93biA9IG5ldyBCdXR0b24gJycsJycsICAgICgpID0+IEBsaXN0YS5QYWdlRG93bigpXHJcblxyXG5cdFx0QGJ1dHRvbnMuXy5hY3RpdmUgPSBmYWxzZVxyXG5cdFx0c3ByZWFkIEBidXR0b25zLCAwLjYqZy5aT09NW2cuc3RhdGVdLHksaFxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGZpbGwgJ3doaXRlJ1xyXG5cdFx0QHNob3dIZWFkZXIgZy50b3VybmFtZW50LnJvdW5kXHJcblxyXG5cdFx0QGxpc3RhLmRyYXcoKVxyXG5cclxuXHRcdGZvciBrZXkgb2YgQGJ1dHRvbnNcclxuXHRcdFx0YnV0dG9uID0gQGJ1dHRvbnNba2V5XVxyXG5cdFx0XHRidXR0b24uZHJhdygpXHJcblxyXG5cdG1vdXNlV2hlZWwgOiAoZXZlbnQgKS0+IEBsaXN0YS5tb3VzZVdoZWVsIGV2ZW50XHJcblx0bW91c2VQcmVzc2VkIDogKGV2ZW50KSAtPiBcclxuXHRcdGlmIG1vdXNlWSA8IDQgKiBnLlpPT01bZy5zdGF0ZV1cclxuXHRcdFx0cHJpbnQgJ3ByZXNzZWQnLG1vdXNlWSw0ICogZy5aT09NW2cuc3RhdGVdXHJcblx0XHRcdHByaW50ICdAYnV0dG9ucycsQGJ1dHRvbnNcclxuXHRcdFx0Zm9yIGtleSBvZiBAYnV0dG9uc1xyXG5cdFx0XHRcdGJ1dHRvbiA9IEBidXR0b25zW2tleV1cclxuXHRcdFx0XHRwcmludCBidXR0b24udGl0bGVcclxuXHRcdFx0XHRpZiBidXR0b24uaW5zaWRlIG1vdXNlWCxtb3VzZVkgdGhlbiBidXR0b24uY2xpY2soKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRAbGlzdGEubW91c2VQcmVzc2VkIGV2ZW50XHJcblxyXG5cdGtleVByZXNzZWQgOiAoZXZlbnQpIC0+IEBidXR0b25zW2tleV0uY2xpY2soKVxyXG5cclxuIl19
//# sourceURL=c:\github\Dense\coffee\pairings.coffee