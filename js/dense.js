// Generated by CoffeeScript 2.7.0
var ALFABET, ASCII, datum, downloadFile, message, resultat;

import {
  parseExpr
} from './parser.js';

import {
  g,
  print,
  range
} from './globals.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

import {
  Tournament
} from './tournament.js';

import {
  Tables
} from './tables.js';

import {
  Names
} from './names.js';

import {
  Standings
} from './standings.js';

import {
  Pairings
} from './pairings.js';

g.LPP = 14;

g.RINGS = {
  'b': '•',
  ' ': ' ',
  'w': 'o'
};

ASCII = '0123456789abcdefg';

ALFABET = '123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'; // 62 ronder maximalt

datum = '';

g.tournament = null;

g.errors = []; // id för motsägelsefulla resultat. Tas bort med Delete

g.pages = [];

resultat = []; // 012 sorterad på id

message = ''; //This is a tutorial g.tournament. Use it or edit the URL'

downloadFile = function(txt, filename) {
  var a, blob, url;
  blob = new Blob([txt], {
    type: 'text/plain'
  });
  url = URL.createObjectURL(blob);
  a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  return URL.revokeObjectURL(url);
};

window.windowResized = function() {
  resizeCanvas(windowWidth, windowHeight - 4);
  return g.LPP = Math.floor(height / g.ZOOM[g.state]) - 4;
};

window.setup = function() {
  createCanvas(windowWidth - 4, windowHeight - 4);
  textFont('Courier New');
  // textAlign window.LEFT,window.TOP
  textAlign(CENTER, CENTER);
  rectMode(window.CORNER);
  g.ZOOM = [
    20,
    20,
    20,
    20 // vertical line distance for four states
  ];
  g.state = g.TABLES;
  g.tournament = new Tournament();
  g.N = 0; // number of players
  g.tournament = new Tournament();
  // g.tournament.lotta()
  g.state = 3;
  g.pages = [new Tables(), new Names(), new Standings(), new Pairings()];
  print(g.pages);
  return window.windowResized();
};

window.draw = function() {
  background('gray');
  textSize(g.ZOOM[g.state]);
  return g.pages[g.state].draw();
};

window.mousePressed = function(event) {
  return g.pages[g.state].mousePressed(event);
};

window.mouseWheel = function(event) {
  return g.pages[g.state].mouseWheel(event);
};

window.keyPressed = function(event) {
  var key2;
  key2 = key;
  if (key2 === 'Control' || key2 === 'Shift' || key2 === 'I') {
    return;
  }
  if (key2 === '1') {
    key2 = 'K1';
  }
  if (key2 === '0') {
    key2 = 'K0';
  }
  return g.pages[g.state].keyPressed(event, key2);
};

// om något resultat saknas för en aktiv spelare, ska ingen lottning ske
// if key in 'pP'
// 	for p in g.tournament.persons
// 		if p.active and p.res.length < p.col.length
// 			print 'Pairings kan ej nås pga att resultat saknas för bl a',"#{p}"
// 			return

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVuc2UuanMiLCJzb3VyY2VSb290IjoiLi5cXCIsInNvdXJjZXMiOlsiY29mZmVlXFxkZW5zZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLE9BQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsU0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLENBQVQ7RUFBVyxLQUFYO0VBQWlCLEtBQWpCO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxVQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxTQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsUUFBVDtDQUFBLE1BQUE7O0FBRUEsQ0FBQyxDQUFDLEdBQUYsR0FBUTs7QUFFUixDQUFDLENBQUMsS0FBRixHQUFVO0VBQUMsR0FBQSxFQUFJLEdBQUw7RUFBVSxHQUFBLEVBQUksR0FBZDtFQUFtQixHQUFBLEVBQUk7QUFBdkI7O0FBRVYsS0FBQSxHQUFROztBQUNSLE9BQUEsR0FBVSxnRUFmVjs7QUFpQkEsS0FBQSxHQUFROztBQUNSLENBQUMsQ0FBQyxVQUFGLEdBQWU7O0FBQ2YsQ0FBQyxDQUFDLE1BQUYsR0FBVyxHQW5CWDs7QUFxQkEsQ0FBQyxDQUFDLEtBQUYsR0FBVTs7QUFDVixRQUFBLEdBQVcsR0F0Qlg7O0FBdUJBLE9BQUEsR0FBVSxHQXZCVjs7QUEyQkEsWUFBQSxHQUFlLFFBQUEsQ0FBQyxHQUFELEVBQUssUUFBTCxDQUFBO0FBQ2YsTUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBO0VBQUMsSUFBQSxHQUFPLElBQUksSUFBSixDQUFTLENBQUMsR0FBRCxD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LFVBQWpCLENBQTRCLEtBQTVCLEVBQWtDLElBQWxDO0FBTHFCOztBQXRFdEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZUV4cHIgfSBmcm9tICcuL3BhcnNlci5qcydcclxuaW1wb3J0IHsgZyxwcmludCxyYW5nZSB9IGZyb20gJy4vZ2xvYmFscy5qcycgXHJcbmltcG9ydCB7IEJ1dHRvbixzcHJlYWQgfSBmcm9tICcuL2J1dHRvbi5qcycgXHJcbmltcG9ydCB7IExpc3RhIH0gZnJvbSAnLi9saXN0YS5qcycgXHJcbmltcG9ydCB7IFRvdXJuYW1lbnQgfSBmcm9tICcuL3RvdXJuYW1lbnQuanMnIFxyXG5pbXBvcnQgeyBUYWJsZXMgfSBmcm9tICcuL3RhYmxlcy5qcycgXHJcbmltcG9ydCB7IE5hbWVzIH0gZnJvbSAnLi9uYW1lcy5qcycgXHJcbmltcG9ydCB7IFN0YW5kaW5ncyB9IGZyb20gJy4vc3RhbmRpbmdzLmpzJyBcclxuaW1wb3J0IHsgUGFpcmluZ3MgfSBmcm9tICcuL3BhaXJpbmdzLmpzJyBcclxuXHJcbmcuTFBQID0gMTRcclxuXHJcbmcuUklOR1MgPSB7J2InOifigKInLCAnICc6JyAnLCAndyc6J28nfVxyXG5cclxuQVNDSUkgPSAnMDEyMzQ1Njc4OWFiY2RlZmcnXHJcbkFMRkFCRVQgPSAnMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgIyA2MiByb25kZXIgbWF4aW1hbHRcclxuXHJcbmRhdHVtID0gJydcclxuZy50b3VybmFtZW50ID0gbnVsbFxyXG5nLmVycm9ycyA9IFtdICMgaWQgZsO2ciBtb3Rzw6RnZWxzZWZ1bGxhIHJlc3VsdGF0LiBUYXMgYm9ydCBtZWQgRGVsZXRlXHJcblxyXG5nLnBhZ2VzID0gW11cclxucmVzdWx0YXQgPSBbXSAjIDAxMiBzb3J0ZXJhZCBww6UgaWRcclxubWVzc2FnZSA9ICcnICNUaGlzIGlzIGEgdHV0b3JpYWwgZy50b3VybmFtZW50LiBVc2UgaXQgb3IgZWRpdCB0aGUgVVJMJ1xyXG5cclxuXHJcblxyXG5kb3dubG9hZEZpbGUgPSAodHh0LGZpbGVuYW1lKSAtPlxyXG5cdGJsb2IgPSBuZXcgQmxvYiBbdHh0XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfVxyXG5cdHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwgYmxvYlxyXG5cdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdhJ1xyXG5cdGEuaHJlZiA9IHVybFxyXG5cdGEuZG93bmxvYWQgPSBmaWxlbmFtZVxyXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQgYVxyXG5cdGEuY2xpY2soKVxyXG5cdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQgYVxyXG5cdFVSTC5yZXZva2VPYmplY3RVUkwgdXJsXHJcblxyXG53aW5kb3cud2luZG93UmVzaXplZCA9IC0+IFxyXG5cdHJlc2l6ZUNhbnZhcyB3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0LTRcclxuXHRnLkxQUCA9IGhlaWdodCAvLyBnLlpPT01bZy5zdGF0ZV0gLSA0XHJcblxyXG53aW5kb3cuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aC00LHdpbmRvd0hlaWdodC00XHJcblx0dGV4dEZvbnQgJ0NvdXJpZXIgTmV3J1xyXG5cdCMgdGV4dEFsaWduIHdpbmRvdy5MRUZULHdpbmRvdy5UT1BcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdHJlY3RNb2RlIHdpbmRvdy5DT1JORVJcclxuXHJcblx0Zy5aT09NID0gWzIwLDIwLDIwLDIwXSAjIHZlcnRpY2FsIGxpbmUgZGlzdGFuY2UgZm9yIGZvdXIgc3RhdGVzXHJcblx0Zy5zdGF0ZSA9IGcuVEFCTEVTXHJcblx0Zy50b3VybmFtZW50ID0gbmV3IFRvdXJuYW1lbnRcclxuXHRnLk4gPSAwICMgbnVtYmVyIG9mIHBsYXllcnNcclxuXHJcblx0Zy50b3VybmFtZW50ID0gbmV3IFRvdXJuYW1lbnQoKVxyXG5cdCMgZy50b3VybmFtZW50LmxvdHRhKClcclxuXHRnLnN0YXRlID0gM1xyXG5cclxuXHRnLnBhZ2VzID0gW25ldyBUYWJsZXMsIG5ldyBOYW1lcywgbmV3IFN0YW5kaW5ncywgbmV3IFBhaXJpbmdzXVxyXG5cdHByaW50IGcucGFnZXNcclxuXHJcblx0d2luZG93LndpbmRvd1Jlc2l6ZWQoKVxyXG5cclxud2luZG93LmRyYXcgPSAtPlxyXG5cdGJhY2tncm91bmQgJ2dyYXknXHJcblx0dGV4dFNpemUgZy5aT09NW2cuc3RhdGVdXHJcblx0Zy5wYWdlc1tnLnN0YXRlXS5kcmF3KClcclxuXHJcbndpbmRvdy5tb3VzZVByZXNzZWQgPSAoZXZlbnQpIC0+IGcucGFnZXNbZy5zdGF0ZV0ubW91c2VQcmVzc2VkIGV2ZW50XHJcbndpbmRvdy5tb3VzZVdoZWVsICAgPSAoZXZlbnQpIC0+IGcucGFnZXNbZy5zdGF0ZV0ubW91c2VXaGVlbCBldmVudFxyXG53aW5kb3cua2V5UHJlc3NlZCAgID0gKGV2ZW50KSAtPiBcclxuXHRrZXkyID0ga2V5XHJcblx0aWYga2V5MiBpbiBbJ0NvbnRyb2wnLCdTaGlmdCcsJ0knXSB0aGVuIHJldHVyblxyXG5cdGlmIGtleTIgPT0gJzEnIHRoZW4ga2V5MiA9ICdLMSdcclxuXHRpZiBrZXkyID09ICcwJyB0aGVuIGtleTIgPSAnSzAnXHJcblx0Zy5wYWdlc1tnLnN0YXRlXS5rZXlQcmVzc2VkIGV2ZW50LGtleTJcclxuXHQjIG9tIG7DpWdvdCByZXN1bHRhdCBzYWtuYXMgZsO2ciBlbiBha3RpdiBzcGVsYXJlLCBza2EgaW5nZW4gbG90dG5pbmcgc2tlXHJcblx0IyBpZiBrZXkgaW4gJ3BQJ1xyXG5cdCMgXHRmb3IgcCBpbiBnLnRvdXJuYW1lbnQucGVyc29uc1xyXG5cdCMgXHRcdGlmIHAuYWN0aXZlIGFuZCBwLnJlcy5sZW5ndGggPCBwLmNvbC5sZW5ndGhcclxuXHQjIFx0XHRcdHByaW50ICdQYWlyaW5ncyBrYW4gZWogbsOlcyBwZ2EgYXR0IHJlc3VsdGF0IHNha25hcyBmw7ZyIGJsIGEnLFwiI3twfVwiXHJcblx0IyBcdFx0XHRyZXR1cm4gIl19
//# sourceURL=c:\github\Dense\coffee\dense.coffee